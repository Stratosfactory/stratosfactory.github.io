(function(e){function t(t){for(var c,a,s=t[0],i=t[1],l=t[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,s=1;s<n.length;s++){var i=n[s];0!==o[i]&&(c=!1)}c&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},o={app:0},r=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1214:function(e,t,n){},2399:function(e,t,n){},"26d3":function(e,t,n){"use strict";n("f63b")},"37b5":function(e,t,n){},"520e":function(e,t,n){"use strict";n("8e29")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23");function o(e,t,n,o,r,a){var s=Object(c["y"])("navigation"),i=Object(c["y"])("router-view");return Object(c["q"])(),Object(c["d"])("div",null,[Object(c["g"])(s),Object(c["g"])(i)])}var r=n("d299"),a=n.n(r),s=Object(c["I"])("data-v-5a3f10a6");Object(c["t"])("data-v-5a3f10a6");var i={class:"navbar"},l=Object(c["g"])("img",{src:a.a,class:"logo"},null,-1),u=Object(c["f"])("Home"),d=Object(c["f"])("Admin Portal");Object(c["r"])();var p=s((function(e,t,n,o,r,a){var p=Object(c["y"])("router-link");return Object(c["q"])(),Object(c["d"])("div",i,[l,Object(c["g"])(p,{to:"/"},{default:s((function(){return[u]})),_:1}),Object(c["g"])(p,{to:"/admin"},{default:s((function(){return[d]})),_:1})])})),b={};n("bee5");b.render=p,b.__scopeId="data-v-5a3f10a6";var f=b,h={components:{navigation:f}};n("64be");h.render=o;var m=h,g=n("6c02");function O(e,t,n,o,r,a){var s=Object(c["y"])("user-input"),i=Object(c["y"])("data-lake"),l=Object(c["y"])("user-feed");return Object(c["q"])(),Object(c["d"])("div",{class:[r.searchCompleted?"applayout":"applayout-init",r.searchCompleted?"gridSize":""]},[Object(c["g"])(s,{style:{"grid-area":"menu"},onSearchComplete:a.setgridLayout,selectedElement:r.selectedElement,onRefreshFeed:a.refreshFeed},null,8,["onSearchComplete","selectedElement","onRefreshFeed"]),r.searchCompleted?(Object(c["q"])(),Object(c["d"])(i,{key:0,style:{"grid-area":"datalake"},response:r.spotifyResponse,onSelectElement:a.passElement},null,8,["response","onSelectElement"])):Object(c["e"])("",!0),Object(c["g"])(l,{style:{"grid-area":"feed"},refreshTrigger:r.refreshTrigger},null,8,["refreshTrigger"])],2)}var j=Object(c["I"])("data-v-9f3f2c96");Object(c["t"])("data-v-9f3f2c96");var v={class:"menu"},y=Object(c["g"])("h2",null,"Was andere Gäste hinzugefügt haben",-1),k={class:"container"},w={class:"datablock"},S=Object(c["g"])("i",{class:"pi pi-user"},null,-1),E={class:"song"},_=Object(c["g"])("i",{class:"pi pi-volume-up"},null,-1),C={class:"datablock"},q=Object(c["g"])("i",{class:"pi pi-comment"},null,-1),A=Object(c["g"])("i",{class:"pi pi-heart"},null,-1),I=Object(c["f"])("ALLE ANZEIGEN");Object(c["r"])();var B=j((function(e,t,n,o,r,a){var s=Object(c["y"])("Button");return Object(c["q"])(),Object(c["d"])("div",v,[y,Object(c["g"])("section",k,[(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["w"])(e.posts,(function(e){return Object(c["q"])(),Object(c["d"])("div",{key:e._id,class:"element"},[Object(c["g"])("img",{src:e.spotifyElement.image},null,8,["src"]),Object(c["g"])("div",w,[S,Object(c["g"])("p",null,Object(c["B"])(e.userName),1)]),Object(c["g"])("div",E,[_,Object(c["g"])("p",null,"Artist:"+Object(c["B"])(e.spotifyElement.artist),1),Object(c["g"])("p",null,"Song:"+Object(c["B"])(e.spotifyElement.song),1)]),Object(c["g"])("div",C,[q,Object(c["g"])("p",null,Object(c["B"])(e.comment),1)]),Object(c["g"])("p",{class:"likeButton",onClickOnce:function(t){return a.likeElement(e)}},[A,Object(c["f"])(Object(c["B"])(e.likes),1)],40,["onClickOnce"])])})),128))]),Object(c["g"])(s,{onClickOnce:t[1]||(t[1]=function(e){return a.getPosts()})},{default:j((function(){return[I]})),_:1})])})),P=(n("fb6a"),n("bc3a")),T=n.n(P),N=n("6549"),z=n.n(N),x={components:{Button:z.a},data:function(){return{posts:null,test:null}},props:{refreshTrigger:{type:Boolean}},methods:{getPosts:function(e){var t=this;T.a.get("https://crowdplaylist.herokuapp.com/feed/posts").then((function(n){var c=0;c=e>=n.data.posts.length||0===e?n.data.posts.length:e,t.test=c,t.posts=n.data.posts.reverse().slice(0,c)})).catch((function(e){t.posts="Failed to fetch data form Database",console.log(e)}))},likeElement:function(e){T.a.post("https://crowdplaylist.herokuapp.com/feed/like",{_id:e._id,likes:e.likes+1}).then(e.likes+=1).catch((function(e){return console.log(e)}))}},mounted:function(){this.getPosts(5)},watch:{refreshTrigger:function(){this.refreshTrigger&&this.getPosts(5)}}};n("5c88");x.render=B,x.__scopeId="data-v-9f3f2c96";var D=x,R=Object(c["I"])("data-v-0773f49a");Object(c["t"])("data-v-0773f49a");var M={class:"menu"},L=Object(c["g"])("h2",null,"Playlist Menu",-1),V={key:0},F=Object(c["g"])("p",null,"Auf Button drücken um nach einem Titel zu suchen und diesen zur Playlist hinzuzufügen",-1),U=Object(c["f"])("Lied hinzufügen"),K=Object(c["g"])("br",null,null,-1),G={key:1},$=Object(c["g"])("p",null," Gib Artist, Lied oder Album ein und klicke auf Suchen ",-1),H={class:"p-inputgroup"},J=Object(c["g"])("p",null,"Teile uns deinen Namen mit",-1),W=Object(c["g"])("p",null,"[OPTIONAL] Füge einen Kommentar hinzu",-1),Z=Object(c["g"])("p",null,"Klicke abschließend auf Musikwunsch abschicken",-1);Object(c["r"])();var Q=R((function(e,t,n,o,r,a){var s=Object(c["y"])("Button"),i=Object(c["y"])("InputText"),l=Object(c["y"])("Textarea");return Object(c["q"])(),Object(c["d"])("div",M,[L,!1===e.authorizationComplete?(Object(c["q"])(),Object(c["d"])("div",V,[F,Object(c["g"])(s,{onClick:a.authentication},{default:R((function(){return[U]})),_:1},8,["onClick"]),K])):(Object(c["q"])(),Object(c["d"])("div",G,[$,Object(c["g"])("div",H,[Object(c["g"])(i,{placeholder:"Suche nach Lied, Artist oder Album",modelValue:e.query,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.query=t}),onKeyup:Object(c["G"])(a.searchSpotify,["enter"])},null,8,["modelValue","onKeyup"]),Object(c["g"])(s,{icon:"pi pi-search",class:"p-button",onClick:a.searchSpotify},null,8,["onClick"])]),J,Object(c["g"])(i,{placeholder:"Dein Name",modelValue:e.userName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.userName=t})},null,8,["modelValue"]),W,Object(c["g"])(l,{modelValue:e.comment,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.comment=t}),autoResize:!0,rows:"3",cols:"30",placeholder:"Dein Kommentar",maxlength:"200"},null,8,["modelValue"]),Z,Object(c["g"])(s,{label:"Abschicken",icon:"pi pi-check-circle",iconPos:"right",disabled:a.enableButton,onClickOnce:a.submitPost},null,8,["disabled","onClickOnce"])]))])})),X=n("a84a"),Y=n.n(X),ee=n("050f"),te=n.n(ee),ne={data:function(){return{authorizationComplete:!1,searchCompleted:!1,token:null,query:null,spotifyResponse:null,searchError:null,comment:null,userName:""}},props:{selectedElement:{type:Object}},computed:{enableButton:function(){return""==this.userName||null===this.selectedElement}},components:{Button:z.a,InputText:Y.a,Textarea:te.a},methods:{searchSpotify:function(){var e=this;this.searchCompleted=!0;var t={q:this.query,type:"track",market:"DE",limit:6};T.a.get("https://api.spotify.com/v1/search",{params:t,headers:{Authorization:"Bearer "+this.token}}).then((function(t){return e.$emit("search-complete",e.searchCompleted,t)})).catch((function(t){return e.searchError=t}))},authentication:function(){var e=this;T.a.get("https://crowdplaylist.herokuapp.com/connect/authorization").then((function(t){e.token=t.data.access_token})).catch((function(e){console.log(e)})),this.authorizationComplete=!0},submitPost:function(){var e=this;T.a.post("https://crowdplaylist.herokuapp.com/feed/post",{id:(new Date).toDateString()+"_"+Math.floor(9999*Math.random()),userName:this.userName,comment:this.comment,spotifyElement:this.selectedElement,likes:0}).then((function(t){console.log(t),e.$emit("refresh-feed")})).catch((function(e){return console.log(e)}))}}};n("b7e3");ne.render=Q,ne.__scopeId="data-v-0773f49a";var ce=ne,oe=Object(c["I"])("data-v-291d3ac5");Object(c["t"])("data-v-291d3ac5");var re={class:"menu"},ae=Object(c["g"])("h2",null,"Suchergebnisse",-1),se=Object(c["g"])("p",null,"Wähle ein Lied aus der Suchmaske",-1),ie={class:"results"};Object(c["r"])();var le=oe((function(e,t,n,o,r,a){return Object(c["q"])(),Object(c["d"])("div",re,[ae,se,Object(c["g"])("div",ie,[(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["w"])(e.spotifyResponse,(function(e){return Object(c["q"])(),Object(c["d"])("div",{key:e.id,class:{selected:e.selected},onClick:function(t){return a.selectElement(e.id)}},[Object(c["g"])("img",{src:e.image},null,8,["src"]),Object(c["g"])("p",null,"Artist: "+Object(c["B"])(e.artist),1),Object(c["g"])("p",null,"Songname: "+Object(c["B"])(e.song),1),Object(c["g"])("p",null,"Album: "+Object(c["B"])(e.album),1)],10,["onClick"])})),128))])])})),ue=(n("b0c0"),{data:function(){return{selectedElement:null,spotifyResponse:null}},watch:{response:{immediate:!0,handler:function(){for(var e=this.response.data.tracks.items.length,t=this.response.data.tracks.items,n=[],c=0;c<e;c++){var o={id:c,artist:t[c].artists[0].name,song:t[c].name,album:t[c].album.name,image:t[c].album.images[1].url,preview:t[c].preview_url,song_url:t[c].href,selected:!1};n.push(o)}this.spotifyResponse=n}}},props:{response:{type:Object,required:!0}},methods:{selectElement:function(e){for(var t=this.spotifyResponse.length,n=0;n<t;n++)this.spotifyResponse[n].selected=!1;this.spotifyResponse[e].selected=!this.spotifyResponse[e].selected,this.$emit("select-element",this.spotifyResponse[e])}}});n("520e");ue.render=le,ue.__scopeId="data-v-291d3ac5";var de=ue,pe={data:function(){return{searchCompleted:!1,spotifyResponse:null,selectedElement:null,refreshTrigger:!1}},components:{userFeed:D,dataLake:de,userInput:ce},methods:{setgridLayout:function(e,t){this.searchCompleted=!0,this.spotifyResponse=t},passElement:function(e){this.selectedElement=e},refreshFeed:function(){this.refreshTrigger=!0}}};n("f0bc");pe.render=O;var be=pe,fe={class:"adminView"};function he(e,t,n,o,r,a){var s=Object(c["y"])("login-form"),i=Object(c["y"])("result-display");return Object(c["q"])(),Object(c["d"])("div",fe,[Object(c["g"])(s,{onAuthentication:a.authComplete},null,8,["onAuthentication"]),r.authentication?(Object(c["q"])(),Object(c["d"])(i,{key:0})):Object(c["e"])("",!0)])}var me=Object(c["I"])("data-v-8f78fffe");Object(c["t"])("data-v-8f78fffe");var ge={class:"menu"};Object(c["r"])();var Oe=me((function(e,t,n,o,r,a){return Object(c["q"])(),Object(c["d"])("div",ge,[Object(c["g"])("p",null,Object(c["B"])(r.errorMessage),1),Object(c["g"])("form",{onSubmit:t[5]||(t[5]=Object(c["H"])((function(){}),["prevent"]))},[Object(c["F"])(Object(c["g"])("input",{type:"text",placeholder:"User Name","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.userName=e})},null,512),[[c["D"],r.userName]]),Object(c["F"])(Object(c["g"])("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.password=e})},null,512),[[c["D"],r.password]]),Object(c["g"])("button",{onClick:t[3]||(t[3]=function(e){return a.submitUser()})},"Login"),r.userAuthenticated?(Object(c["q"])(),Object(c["d"])("button",{key:0,onClick:t[4]||(t[4]=function(e){return a.logOut()})},"Logout")):Object(c["e"])("",!0)],32)])})),je={data:function(){return{password:null,userName:null,userAuthenticated:!1,errorMessage:null}},methods:{submitUser:function(){var e=this;T.a.post("https://crowdplaylist.herokuapp.com/login/auth",{userName:this.userName,password:this.password}).then((function(t){localStorage.setItem("token",t.data.token);var n=9e5,c=new Date((new Date).getTime()+n);localStorage.setItem("expiryDate",c.toISOString()),e.userAuthenticated=!0,e.authorizationTrigger()})).catch((function(e){console.log(e)}))},logOut:function(){localStorage.removeItem("token"),localStorage.removeItem("expiryDate"),this.userAuthenticated=!1,this.authorizationTrigger()},authorizationTrigger:function(){this.$emit("authentication",this.userAuthenticated)}},mounted:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expiryDate");e&&t?new Date(t)<=new Date?(this.errorMessage="Session timed out, please login",this.logOut()):(this.userAuthenticated=!0,this.authorizationTrigger(),this.errorMessage="Already logged in"):this.errorMessage="Please login"}};n("26d3");je.render=Oe,je.__scopeId="data-v-8f78fffe";var ve=je,ye=Object(c["I"])("data-v-e5cbca2c");Object(c["t"])("data-v-e5cbca2c");var ke={class:"menu"};Object(c["r"])();var we=ye((function(e,t,n,o,r,a){return Object(c["q"])(),Object(c["d"])("div",ke,[(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["w"])(r.responses,(function(e){return Object(c["q"])(),Object(c["d"])("div",{key:e._id,class:"element"},[Object(c["g"])("ul",null,[Object(c["g"])("li",null,"User Name:"+Object(c["B"])(e.userName),1),Object(c["g"])("li",null,"Artist: "+Object(c["B"])(e.spotifyElement.artist),1),Object(c["g"])("li",null,"Song: "+Object(c["B"])(e.spotifyElement.song),1)]),Object(c["g"])("p",null,[Object(c["g"])("i",{class:"pi pi-times-circle",onClick:function(t){return a.deleteEntry(e._id)}},null,8,["onClick"])])])})),128))])})),Se={data:function(){return{responses:null}},mounted:function(){this.getPosts()},methods:{deleteEntry:function(e){var t=localStorage.getItem("token");T.a.post("https://crowdplaylist.herokuapp.com/feed/delete",{id:e},{headers:{Authorization:"Bearer "+t}}).then(this.getPosts).catch((function(e){return console.log(e)}))},getPosts:function(){var e=this;T.a.get("https://crowdplaylist.herokuapp.com/feed/posts").then((function(t){e.responses=t.data.posts})).catch((function(e){return console.log(e)}))}}};n("eb49");Se.render=we,Se.__scopeId="data-v-e5cbca2c";var Ee=Se,_e={components:{loginForm:ve,resultDisplay:Ee},data:function(){return{authentication:!1}},methods:{authComplete:function(e){this.authentication=e}}};n("77e6");_e.render=he;var Ce=_e,qe=[{path:"/",name:"Home",component:be},{path:"/admin",name:"Admin",component:Ce}],Ae=Object(g["a"])({history:Object(g["b"])(),routes:qe}),Ie=Ae,Be=(n("e1ae"),n("4121"),n("e863"),Object(c["c"])(m));Be.use(Ie),Be.mount("#app")},"5c88":function(e,t,n){"use strict";n("60d7")},"60d7":function(e,t,n){},"64be":function(e,t,n){"use strict";n("c894")},"77e6":function(e,t,n){"use strict";n("2399")},"8e29":function(e,t,n){},9647:function(e,t,n){},b7e3:function(e,t,n){"use strict";n("37b5")},bee5:function(e,t,n){"use strict";n("c2f4")},c2f4:function(e,t,n){},c894:function(e,t,n){},d299:function(e,t,n){e.exports=n.p+"img/Stratosfactory.ea7a308c.svg"},eb49:function(e,t,n){"use strict";n("1214")},f0bc:function(e,t,n){"use strict";n("9647")},f63b:function(e,t,n){}});
//# sourceMappingURL=app.6103b030.js.map